<%
#--
#   Copyright (C) 2009 Nokia Corporation and/or its subsidiary(-ies)
#   Copyright (C) 2007, 2008 Johan Sørensen <johan@johansorensen.com>
#   Copyright (C) 2008 August Lilleaas <augustlilleaas@gmail.com>
#   Copyright (C) 2008 Tor Arne Vestbø <tavestbo@trolltech.com>
#   Copyright (C) 2009 Fabio Akita <fabio.akita@gmail.com>
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU Affero General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#   (at your option) any later version.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU Affero General Public License for more details.
#
#   You should have received a copy of the GNU Affero General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#++
%>
<!doctype html lang="en"> 
<head>
  <%= render :partial => "layouts/common_head" %>
  <script type="text/javascript">
	$(document).ready(function() {
		$('.with_sidebar').parent().css('background', 'url("http://gitorious.local:3000/img/container-bg310.png") repeat-y');
		$('ul.navigation').find('li:first').addClass("first"); 
		$('ul.navigation').find('li:last').addClass("last"); 
		$("ul.navigation ~ ul.navigation").addClass("multiple");
		$('table').find('tr:first').find('th:first').addClass("first");
		$('table').find('tr:first').find('th:last').addClass("last");
			
	  $('div.expandable').expander({
	    slicePoint:       200,  // default is 100
	    expandText:         'read more', // default is 'read more...'
	    collapseTimer:    0, // re-collapses after 5 seconds; default is 0, so no re-collapsing
	    userCollapseText: '',  // default is '[collapse expanded text]'
		expandEffect:     'fadeIn',
		userCollapse:     true,
		expandSpeed:      '800'       // speed in milliseconds of the animation effect for expanding the text
	  });
	});
	</script>	
	<!--[if IE 8]>
	<link rel="stylesheet" href="/stylesheets/ie8.css" type="text/css">
	<![endif]-->
	<!--[if IE 7]>
	<link rel="stylesheet" href="/stylesheets/ie7.css" type="text/css">
	<![endif]-->
	
</head>

<body id="<%= controller.controller_name -%>">
<div id="wrapper">
  <% unless GitoriousConfig["system_message"].blank? -%>
  <div id="system_message">
    <p><strong><%= t("views.layout.system_notice") %>:</strong> <%= GitoriousConfig["system_message"] -%></p>
  </div>
  <% end -%>
  <ul id="user-nav">
	<li><%= link_to("Dashboard", root_path) %></li>
	<%= render "layouts/login_logout" -%>
  </ul>
  <div id="header">
    <h1 id="logo">
      <%= link_to image_tag("/img/logo.png"), root_path -%>
    </h1>

    <ul id="menu">
      <% if logged_in? -%>
        <li>
          <%= link_to("Activities", activity_path) %>
        </li>
      <% end -%>
      <% if GitoriousConfig['public_mode'] || logged_in? -%>
        <li class="activity"><a href="#">Activity</a></li>
        <li class="projects"><%= link_to t("views.layout.projects"), projects_path -%></li>
        <li class="teams"><%= link_to t("views.layout.teams"), groups_path -%></li>
      <% end -%>
    </ul>

  </div>
  <% unless @content_for_breadcrumbs.blank? -%>
	<div id="top-bar">
  <ul id="breadcrumbs">
        <li class="project"><a href="/statusnet">StatusNet</a></li><li class="repository"><a href="/statusnet/mainline">mainline</a></li><li class="branch"><a href="/statusnet/mainline/commits/master">master</a></li><li class="tree"><a href="/statusnet/mainline/trees/master">/</a></li><li class="folder"><a href="/statusnet/mainline/trees/master/js">js</a></li><li class="folder"><a href="/statusnet/mainline/trees/master/js/farbtastic">farbtastic</a></li>  
  </ul>
  <% if GitoriousConfig['public_mode'] || logged_in? -%>
    <div id="searchbox">
      <%= render :partial => "/searches/search_box", :locals => {:hide_tips => true} -%>
    </div>
  <% end -%>
</div>
  <% end -%>

  <div id="container" class="<%= @content_for_submenu.blank? ? "" : "in-context-mode" -%>">
    <div id="content" class="<%= sidebar_content? ? "with_sidebar" : "" -%>">
      <%= flashes %>
      <%= yield -%>
    </div>
    <% if sidebar_content? -%>
    <div id="sidebar">

      <%= yield :sidebar -%>
    </div>
    <% end -%>
  </div>
	<div id="footer">
      <%= render :partial => "layouts/common_footer"  -%>
	<div id="footer-links">
		<h3>Gitorious</h3>
		<ul>
			<li><%= link_to t("views.layout.home"), root_path -%></li>
	        <li><%= link_to t("views.layout.about"), about_path -%></li>
	        <li><%= link_to t("views.layout.faq"), faq_path -%></li>
	        <li><%= link_to "Contact", contact_path -%></li>
		</ul>
		<ul>
			<li><%= link_to t("views.layout.discussion"), "http://groups.google.com/group/gitorious" -%></li>
	        <li><%= link_to t("views.layout.blog"), "http://blog.gitorious.org" -%></li>
		</ul>
		<% if GitoriousConfig["terms_of_use"] -%>
		<ul>
			<li><a href="http://en.gitorious.org/tos">Terms of Service</a></li>
          	<li><a href="http://en.gitorious.org/privacy_policy">Privacy Policy</a></li>
		</ul>
		<% end %>
	</div>

      <div class="clear"></div>
    </div>
</div>
</body>
</html>
