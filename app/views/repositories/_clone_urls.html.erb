<%
#--
#   Copyright (C) 2009 Nokia Corporation and/or its subsidiary(-ies)
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU Affero General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#   (at your option) any later version.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU Affero General Public License for more details.
#
#   You should have received a copy of the GNU Affero General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#++
%>

<ul>
	  <li>
	   	<div class="clone_urls">
			<form class="clone_urls_form">
					<p><strong>Copy urls</strong></p>
					<p class="clone_radio"><label for="git-<%= repository.id %>"><input type="radio" id="git-<%= repository.id %>" name="url-<%= repository.id %>" value="<%= h(repository.clone_url) -%>">GIT</label></p>
					<% if repository.http_cloning? %>
						<p class="clone_radio"><label for="http-<%= repository.id %>"><input type="radio" id="http-<%= repository.id %>" name="url-<%= repository.id %>" value="<%= h(repository.http_clone_url) -%>">HTTP</label></p>
					<% end %>
					<p class="clone_radio"><label for="push-<%= repository.id %>"><input id="push-<%= repository.id %>" type="radio" name="url-<%= repository.id %>" value="<%= h(repository.push_url) -%>">Your push</label></p>
					<p class="clone-copy"><input type="text" id="clone-url-<%= repository.id %>" value=""></p>
			</form>
		</div>
					
	  </li>

  <% if logged_in? && current_user.can_write_to?(repository) -%>
  <!--<li>
    <strong><%= t("views.repos.push_url") -%>:</strong>
    <code><%= h(repository.push_url) -%></code>
    <small><%= link_to_help_toggle("detailed_push_info_#{dom_id(repository)}", :text) -%></small>
    <div id="detailed_push_info_<%= dom_id(repository) -%>" class="info_hint" style="display:none">
      <%= t("views.repos.help_push", :repo => repository.push_url) %>
<pre>
git remote add origin <%= repository.push_url %>
# to push the master branch to the origin remote we added above:
git push origin master
# after that you can just do:
git push
</pre>
      </div>
    </li>
  <% end -%> -->
</ul>

<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
		var standard = $('#git-<%= repository.id %>').val();
		$('#clone-url-<%= repository.id %>').val(standard);
		
		$('#git-<%= repository.id %>').click(function () {
			var text = $('#git-<%= repository.id %>').val();
			$('#clone-url-<%= repository.id %>').val(text);
		})
		
		$('#http-<%= repository.id %>').click(function () {
			var text = $('#http-<%= repository.id %>').val();
			$('#clone-url-<%= repository.id %>').val(text);
		})
		$('#push-<%= repository.id %>').click(function () {
			var text = $('#push-<%= repository.id %>').val();
			$('#clone-url-<%= repository.id %>').val(text);
		})

		$('#clone-url-<%= repository.id %>').click(function () {
			this.select();
		});
	});
 
// $('#repo-<%= repository.id -%>-git-toggle').click(function(event) {
//    $('#repo-<%= repository.id -%>-git-url').show();
//    $('#repo-<%= repository.id -%>-http-url').hide();
//    event.preventDefault();
//  });
//  $('#repo-<%= repository.id -%>-http-toggle').click(function(event) {
 //   $('#repo-<%= repository.id -%>-http-url').show();
//    $('#repo-<%= repository.id -%>-git-url').hide(); 
 //   event.preventDefault();
 // });
</script>
